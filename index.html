<!-- Holy shit! A game in 1 hour by Patrick Abel and Russ Meyerriecks -->
<html>
	<head>
		<title>SKYMASTER!</title>
		<script type="text/javascript" src="jquery-1.3.2.min.js"></script>
	</head>
	<body style="text-align: center;">
	<h1 style="color: orange;">SKYMASTER!</h1>
	<canvas id="can" width="800" height="400" style="border: 1px solid black"></canvas>
	<h4>Sprites by <a href="http://prinzeugn.deviantart.com">Mark Simpson</a></h4>
	<script>
		const FPS = 30;
		var left;
		var right;

		var plane = new Image();
		var planeleft = new Image();
		var planeright = new Image();
		var bg = new Image();

		var obst = new Array();
		var iteration = 0;
		var debug = true;
		var step = 0;

		planex = 400;
		planey = 300;
		plane.src = "plane.png";
		planeleft.src = "planeleft.png";
		planeright.src = "planeright.png";
		bg.src = "bg.jpg";

		$(window).keydown(function(e){
			if(e.keyCode == 37){
				left = true;
			}
			if(e.keyCode == 39){
				right = true;
			}
		});
		$(window).keyup(function(e){
			if(e.keyCode == 37){
				left = false;
			}	
			if(e.keyCode == 39){
				right = false;
			}	
			if(e.keyCode == 32){
				// Start the game!
				play();
			}
		});

		function play() {
			var canvas = document.getElementById("can");
			var ctx = canvas.getContext("2d");

			iteration++;

//			ctx.fillStyle = "rgb(0,0,0)";
//			ctx.fillRect (0, 0, canvas.width, canvas.height);
			ctx.drawImage(bg, 0, 0);

			if(debug){
				ctx.font = "20px Times New Roman";
				ctx.fillstyle = "rgb(254,254,254)";
				//ctx.fillText(iteration+'', 0, 0);
				ctx.fillText("hey", 10, 10);
			}

			if(left){
				if(planex > 0){
					planex--;
				}
				ctx.drawImage(planeleft,planex,planey);
			}else if(right){
				if(planex < (canvas.width - plane.width)){
					planex++;
				}
				ctx.drawImage(planeright,planex,planey);
			}else{
				ctx.drawImage(plane,planex,planey);
			}
/*
			// Random obj generation
			for(var i = 0; i < obst.length; i++){
				var o = obst[i];
				o.y += 3;
				ctx.drawImage(o.type, o.x, o.y);

				// If we scrolled past the bottom, delete obstacle
				if(o.y > 500){
					ob.splice(i,1);
					i--;
				}

			// Put collision detection here
			}

			// Randomly place an obstacle on the screen
			if(Math.floor(step*10)%10 == 0){
				var type;
				if(Math.floor(Math.random()*2) == 0){
					type = blah;
				} else {
					type = blah;
				}
				var obj = {x: Math.floor(Math.random()*641*2), y:400, type: type};
				obst.push(obj);
			}
			setInterval(play, 1000/FPS);
*/
			setTimeout(play, 1000/FPS);
		}
	</script>
	</body>
</html>
